## 一、迭代需求简述

本次迭代的主要需求：
 - 实现淮安项目总监或者中队长创建任务，小队长执行任务的任务流
 - 新增-劳作人员管理功能
 - 新增-农资任务管理（农资库存管理员）
 - 新增-农机领用任务管理（农机仓库管理员）
 - 新增-任务管理（总监/中队长/小队长）
 - 新增-农机库存管理
 - 完成任务时自动创建种植计划
 - 完成任务时自动创建采收记录
 - 完成任务时自动创建农事记录

 - 产品需求文档参考链接：http://chandao.freetek.cc/zentao/doc-objectLibs-project-51-70-202.html
 - 产品UE参考链接：https://www.figma.com/file/y7WPVOQIFhPMoOuneeC9yq/淮安项目?node-id=0:1



## 二、参与人员与时间

- 服务端：陈英建、王恺、王磊
- 迭代时间：2022-8-10到2022-9-10
- 涉及到的服务端端：神农口袋、管理后台


list :            0.125天
get  :            0.125天
add  :            0.125天
eidt :            0.125天 
del  :            0.125天

## 三、用例图&&状态图

### 1.业务用例

![1659773577194](typora-user-images\1659773577194.png)



- 1.业务边界定义为完成农事任务；
- 2.抽象出一个任务提出者和一个任务执行者，共同实现完成农事任务的目标；



### 2.农事任务状态图

![1659773666543](typora-user-images\1659773666543.png)

### 3.仓储处理中子任务状态图

![1659773686609](typora-user-images\1659773686609.png)


- 1.农事任务状态图有六个状态：1.待接受、2.关闭、3.仓储处理中、4.待执行、5.执行完毕、6.完成
- 2.农事任务状态图七个动作：1.创建、2.修改、3.撤回、4.拒绝、5.接受、8.提交任务信息、9.确认完成
- 注：5.接受分为四种情况，详见时序图；
- 
- 3.农资出库子任务状态图有两个状态：1.待出库、2.已出库
- 4.农资出库子任务状态图三个动作：1.创建农资出库子任务、2.出库、3.出库完成
- 
- 5.农机领用子任务状态图有两个状态：1.待处理、2.已处理
- 6.农机领用子任务状态图三个动作：1.创建农机领用子任务、2.领用、3.领用完成

### 4.任务提出者系统用例

![1659773775261](typora-user-images\1659773775261.png)



### 5.任务执行者系统用例

![1659773755363](typora-user-images\1659773755363.png)



### 6.农资库管员系统用例

![1659773795750](typora-user-images\1659773795750.png)



### 7.农机库管员系统用例

![1659773810356](typora-user-images\1659773810356.png)



### 8.admin管理员系统用例

![1659773828876](typora-user-images\1659773828876.png)





## 四、核心流程时序



### 1.任务提出者时序（1.创建、2.修改、3.撤回、9.确认完成）

![1659774587599](typora-user-images\1659774587599.png)



### 2.任务执行者时序（4.拒绝、5.接受、8.提交任务信息）

![1659773916956](typora-user-images\1659773916956.png)



### 3.农资库管员时序（6.1出库、7.1出库完成）

![1659773954807](typora-user-images\1659773954807.png)



### 4.农机库管员时序（6.2领用、7.2领用完成）

![1659773971128](typora-user-images\1659773971128.png)




## 五、数据库设计ER图

- 说明：ER图中，方框代表实体，连接线代表实体间的关系，爪形的一端代表多方，双竖线一端代表一方，可用来表示一对一、一对多等关系。
![1659773971128](typora-user-images\Diagram 1.png)



## 六、系统架构设计

### 1.新增淮安项目服务
- 服务名称：service-taskflow
### 2.新增数据库
- 数据库名称：frp_taskflow